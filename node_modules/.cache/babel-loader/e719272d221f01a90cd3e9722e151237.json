{"ast":null,"code":"'use strict';\n\nvar _get = require('babel-runtime/helpers/get')['default'];\n\nvar _inherits = require('babel-runtime/helpers/inherits')['default'];\n\nvar _createClass = require('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = require('babel-runtime/helpers/class-call-check')['default'];\n\nvar _Object$keys = require('babel-runtime/core-js/object/keys')['default'];\n\nvar _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _jquery = require('jquery');\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nrequire('bootstrap-daterangepicker');\n\nvar _getOptions = require('./getOptions');\n\nvar _getOptions2 = _interopRequireDefault(_getOptions);\n\nvar events = ['Show', 'Hide', 'ShowCalendar', 'HideCalendar', 'Apply', 'Cancel'];\n\nvar DatetimeRangePicker = function (_React$Component) {\n  _inherits(DatetimeRangePicker, _React$Component);\n\n  _createClass(DatetimeRangePicker, null, [{\n    key: 'propTypes',\n    value: {\n      startDate: _react2['default'].PropTypes.any,\n      endDate: _react2['default'].PropTypes.any,\n      children: _react2['default'].PropTypes.any,\n      className: _react2['default'].PropTypes.string,\n      style: _react2['default'].PropTypes.object,\n      callback: _react2['default'].PropTypes.func,\n      onEvent: _react2['default'].PropTypes.func,\n      onShow: _react2['default'].PropTypes.func,\n      onHide: _react2['default'].PropTypes.func,\n      onShowCalendar: _react2['default'].PropTypes.func,\n      onHideCalendar: _react2['default'].PropTypes.func,\n      onApply: _react2['default'].PropTypes.func,\n      onCancel: _react2['default'].PropTypes.func\n    },\n    enumerable: true\n  }, {\n    key: 'defaultProps',\n    value: {},\n    enumerable: true\n  }]);\n\n  function DatetimeRangePicker(props) {\n    _classCallCheck(this, DatetimeRangePicker);\n\n    _get(Object.getPrototypeOf(DatetimeRangePicker.prototype), 'constructor', this).call(this, props);\n\n    this.state = {};\n    this.$picker = undefined;\n    this.picker = undefined;\n    this.options = (0, _getOptions2['default'])();\n    this.handleCallback = this.handleCallback.bind(this);\n  }\n\n  _createClass(DatetimeRangePicker, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this = this;\n\n      this.$picker = (0, _jquery2['default'])(this.refs.picker); // initialize\n\n      this.$picker.daterangepicker(this.getOptionsFromProps(), this.handleCallback); // attach event listeners\n\n      events.forEach(function (event) {\n        var lcase = event.toLowerCase();\n\n        _this.$picker.on(lcase + '.daterangepicker', _this.makeEventHandler('on' + event));\n      });\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.getPicker().remove();\n    }\n  }, {\n    key: 'setOptionsFromProps',\n    value: function setOptionsFromProps() {\n      var _this2 = this;\n\n      var currentOptions = this.getOptionsFromProps();\n\n      var keys = _Object$keys(currentOptions);\n\n      if (this.$picker) {\n        if (currentOptions) {\n          keys.forEach(function (key) {\n            _this2.applyOptionToPicker(key, currentOptions[key]);\n          });\n        }\n      }\n    }\n  }, {\n    key: 'getPicker',\n    value: function getPicker() {\n      return this.$picker && this.$picker.data('daterangepicker');\n    }\n  }, {\n    key: 'getOptionsFromProps',\n    value: function getOptionsFromProps() {\n      var _this3 = this;\n\n      var options = {};\n      var props = this.props;\n      var value = undefined;\n      this.options.forEach(function (name) {\n        if (props.hasOwnProperty(name)) {\n          value = props[name];\n\n          switch (name) {\n            case 'startDate':\n            case 'endDate':\n              if (value) {\n                options[name] = value;\n              }\n\n              break;\n\n            case 'locale':\n              if (value && typeof value === 'object') {\n                var picker = _this3.getPicker();\n\n                if (picker) {\n                  value = _jquery2['default'].extend({}, value, picker.locale);\n                }\n              }\n\n              options[name] = value;\n              break;\n\n            default:\n              options[name] = value;\n          }\n        }\n      });\n      return options;\n    }\n  }, {\n    key: 'applyOptionToPicker',\n    value: function applyOptionToPicker(key, value) {\n      if (this.$picker) {\n        this.$picker.data('daterangepicker')[key] = value;\n      }\n    }\n  }, {\n    key: 'handleCallback',\n    value: function handleCallback(start, end) {\n      if (typeof this.props.callback === 'function') {\n        this.props.callback(start, end);\n      }\n    }\n  }, {\n    key: 'makeEventHandler',\n    value: function makeEventHandler(eventType) {\n      var _this4 = this;\n\n      return function (event, picker) {\n        if (_this4.props.onEvent) {\n          _this4.props.onEvent(event, picker);\n        }\n\n        if (typeof _this4.props[eventType] === 'function') {\n          _this4.props[eventType](event, picker);\n        }\n      };\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      this.setOptionsFromProps();\n      return _react2['default'].createElement('div', {\n        ref: 'picker',\n        style: this.props.style,\n        className: this.props.className\n      }, this.props.children);\n    }\n  }]);\n\n  return DatetimeRangePicker;\n}(_react2['default'].Component);\n\nexports['default'] = DatetimeRangePicker;\nmodule.exports = exports['default'];","map":null,"metadata":{},"sourceType":"script"}